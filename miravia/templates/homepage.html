{% extends "base.html" %}

{% block content %}
    <style>
        /* CSS styles for the message text */
        #message-text {
            padding: 10px;
            border-radius: 5px;
            font-weight: bold;
            margin-top: 10px;
        }
        
        #message-text.success {
            color: green;
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        
        #message-text.error {
            color: red;
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-size: x-small;
            font-weight:bold;
            color: #db1e1e;
        }
        .form-outline {
            font-size: small;
            font-display:inherit;
            
        }
        .form-outline .form-control~.form-label {
            color: #db1e1e;
            font-weight: bold;
        }

        #input-form.disabled_product_service_only_service input, 
        #input-form.disabled_product_service_only_service select:not(#product-service){
                pointer-events: none;
                background-color: #e9ecef;
        }

        #input-form.disabled_product_service_na input, 
        #input-form.disabled_product_service_na select:not(#product-service):not(#qualification-feedback){
                pointer-events: none;
                background-color: #e9ecef;
                cursor: not-allowed;
        }

        #input-form.disabled_product_service input:not(#lead-number):not(#url), 
        #input-form.disabled_product_service select:not(#product-service):not(#qualification-feedback):not(#pic){
                pointer-events: none;
                background-color: #e9ecef;
        }

        #input-form.disabled_spanish input:not(#lead-number):not(#url), 
        #input-form.disabled_spanish select:not(#product-service):not(#local_spanish_seller):not(#qualification-feedback):not(#pic){
                pointer-events: none;
                background-color: #e9ecef;
        }

        #input-form.disabled input:not(#lead-number):not(#url), 
        #input-form.disabled select:not(#local_spanish_seller):not(#qualification-feedback):not(#pic){
                pointer-events: none;
                background-color: #e9ecef;
        }

        #input-form.disabled1 input:not(#lead-number):not(#url):not(#vat), 
        #input-form.disabled1 select:not(#cluster):not(#product-service):not(#local_spanish_seller):not(#feedback-final):not(#qualification-feedback):not(#pic){
                pointer-events: none;
                background-color: #e9ecef;
        }

        #input-form .pointer_none {
                pointer-events: none;
                background-color: #e9ecef;
                
        }
        .form-outline.copy {
          position: relative;
        }

        .form-outline.copy .copy-url {
          position: absolute;
          right: 0px;
          top: 1px;
          cursor: pointer;
          padding: 7px 30px;
          background-color: #f7c565;
          font-size: 17px;
          border-radius: 4px;
      }

      .form-outline .form-control {
        min-height: auto;
        padding: 0.53em 0.75em;
      }

      .col-md-12.mb-4 .form-select {
        height: 40px;
        margin-bottom: 30px;
      }

      .imported_data {
        background-color: lightyellow !important;
      }


    </style>
  
  <!-- Start your project here-->
  <form id="input-form" method="POST" action="/">
  <div class="row" style="display: flex; justify-content: center; margin-top: 60px;">
    <div class="col-md-1">
      <div class="form-outline">
        <input type="text" id="lead-number-go" class="form-control" name="lead-number-go" style="font-weight: bold; height:50px; background-color: white;"/>
        <label class="form-label" for="form7Example3">LEAD NUMBER</label>
        
    </div>
  </div>
  <div class="col-md-1"><button type="button" id="go-domain-button" style="height: 50px; font-size: 0.9rem; font-weight: bold;" class="btn btn-secondary btn-block">
    Go
  </button></div>
  <div class="col-md-1"></div>
    <div class="col-md-6 mb-4">
        <div class="row g-2">
          <div >
            <select id="pic" name="pic" class="form-select" style="font-weight: bold; height:50px;">
                  <option value="">--Select PIC--</option>
              </select>
          </div>
            
            </div>
          </div>
          <div class="col-md-3"></div>
        </div>
        
      </div>
      
    <div class="col-md-12 mb-4" style="display: flex; justify-content: center;">
      <div class="card" style="width: 1100px;">
        <div class="card-body">
            <div class="row mb-2">
                <!-- <input id="end-time" name="end-time" type="text" hidden> -->
                <div class="col-md-8">
                    <!-- <label for="productServiceSelect">-</label> -->
                    <div class="form-outline mb-4">
                        <input type="text" id="lead-number" class="form-control" name="lead-number" tabindex="-1" readonly />
                        <label class="form-label" for="form7Example3">LEAD NUMBER</label>
                    </div>

                    <!-- Text input -->
                    <div class="form-outline mb-4 copy">
                      <input type="text" id="url" class="form-control" name="url" tabindex="-1" readonly/>
                      <label class="form-label" for="form7Example3">LINK/URL</label>
                      <div id="copy-button" class="copy-url">
                        Copy
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <label for="productServiceSelect" >PRODUCT/SERVICE</label>
                        <select name="product-service" id="product-service" class="form-select reset" >
                            
                            <option value="" selected>---Please select---</option>
                            <option value="Only Services">Only Services</option>
                            <option value="Only Products">Only Products</option>
                            <option value="Products & Services">Products & Services</option>
                            <option value="N/A">N/A</option>
                        </select>
                      </div>
                      <div class="col-md-6">
                        <label for="productServiceSelect" >LOCAL SPANISH SELLER?</label>
                        <select name="local_spanish_seller" id="local_spanish_seller" class="form-select reset">
                            <option value="" selected>---Please select---</option>
                            <option value="Y">Y</option>
                            <option value="N">N</option>
               
                        </select>
                      </div>
                    </div>
                    
                    <div class="row">
                      <div class="col-md-4">
                        <label for="productServiceSelect" >CLUSTER</label>
                      <select name="cluster" id="cluster" class="form-select reset">
                          <option value="" selected>---Please select---</option>
                          <option value="B&H">B&H</option>
                          <option value="EL">EL</option>
                          <option value="FA">FA</option>
                          <option value="GCMB">GCMB</option>
                          <option value="GM">GM</option>
                          <option value="Other">Other</option>
                      </select>
                      
                      </div>
                      <div class="col-md-4">
                        <label for="productServiceSelect" >L1</label>
                      <select name="l1" id="l1" class="form-select reset">
                          <option value="" selected>---Please select---</option>
                          {% for category in categories_l1 %}
                          <option value="{{ category }}">{{ category }}</option>
                          {% endfor %}
                          
                      </select>
                      
                      </div>
                      <div class="col-md-4"><label for="productServiceSelect" >L2</label>
                        <select name="l2" id="l2" class="form-select reset" >
                            <option value="" selected>---Please select---</option>
                            {% for category in categories_l2 %}
                            <option value="{{ category }}">{{ category }}</option>
                            {% endfor %}
                        </select></div>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <label for="productServiceSelect" >PRODUCT DESCRIPTION OR AT LEAST 2 PRODUCT IMAGES</label>
                        <select name="product_desc_or_at_least_2_product_images" id="product_desc_or_at_least_2_product_images" class="form-select reset">
                            <option value="" selected>---Please select---</option>
                            <option value="Y">Y</option>
                            <option value="N">N</option>
              
                        </select>
                      </div>
                    </div>
                    <div class="form-outline mb-4">
                      <input type="text" id="vat" name="vat" class="form-control reset"/>
                      <label class="form-label" for="vat">VAT</label>
                  </div>

                    <!-- Text input -->
                    <div class="form-outline mb-4">
                    <input type="text" id="company-name" name="company-name" class="form-control reset"/>
                    <label class="form-label" for="company-name">COMPANY NAME</label>
                    </div>
                    <div class="row">
                      <div class="col-md-6">
                        <label for="productServiceSelect" >REVENUE</label>
                        <select name="revenue" id="revenue" class="form-select reset" >
                            <option value="" selected>---Please select---</option>
                            <option value="1-250.000">1-250.000</option>
                            <option value="250.000 -750.000">250.000 -750.000</option>
                            <option value="750.000 -1.500.000">750.000 -1.500.000</option>
                            <option value="1.500.000 - 3.000.000">1.500.000 - 3.000.000</option>
                            <option value="3.000.000 - 50.000.000">3.000.000 - 50.000.000</option>
                            <option value="More than 50.000.000">More than 50.000.000</option>
                        </select>
                      </div>

                      <div class="col-md-6">
                        <label for="productServiceSelect" >PRODUCT COUNT</label>
                        <select name="product-count" id="product-count" class="form-select reset">
                            <option value="" selected>---Please select---</option>
                            <option value="0-10">0-10</option>
                            <option value="11 - 1.000">11 - 1.000</option>
                            <option value="1.000+">1.000+</option>
                            <option value="10.000+">10.000+</option>
                            <option value="50.000+">50.000+</option>
                            <option value="100.000+">100.000+</option>
                        </select>
                      </div>
                      
                    </div>
                    

                    
                </div>
                <div class="col-md-4">
                    

                    <div class="form-outline mb-4">
                        <input type="text" name="amount-of-phonenumbers" id="amount-of-phonenumbers" class="form-control" tabindex="-1" readonly/>
                        <label class="form-label" for="amount-of-phonenumbers">AMOUNT OF PHONE NUMBERS?</label>
                    </div>

                    <!-- Text input -->
                    <div class="form-outline mb-4">
                    <input type="text" name="telephone" id="telephone" class="form-control reset" />
                    <label class="form-label" for="telephone">TELEPHONE</label>
                    </div>
        
                    <!-- Text input -->
                    <div class="form-outline mb-4">
                    <input type="text" name="telephone1" id="telephone1" class="form-control reset" />
                    <label class="form-label" for="telephone1">TELEPHONE1</label>
                    </div>
        
                    <!-- Email input -->
                    <div class="form-outline mb-4">
                    <input type="text" name="amount-of-emails" id="amount-of-emails" class="form-control" tabindex="-1" readonly/>
                    <label class="form-label" for="amount-of-emails">AMOUNT OF EMAILS</label>
                    </div>
        
                    <!-- Number input -->
                    <div class="form-outline mb-4">
                    <input type="text" name="email" id="email" class="form-control reset" />
                    <label class="form-label" for="email">EMAIL</label>
                    </div>
                    <!-- Text input -->
                    <div class="form-outline mb-3">
                        <input type="text" name="email1" id="email1" class="form-control reset" />
                        <label class="form-label" for="email1">EMAIL1</label>
                    </div>
                    <label for="productServiceSelect" >FEEDBACK FINAL</label>
                    <select name="feedback-final" id="feedback-final" class="form-select mb-3 reset" >
                        <option value="" selected>---Please select---</option>
                        <option value="OK">OK</option>
                        <option value="NOT OK">NOT OK</option>
                        <option value="UNCERTAIN">UNCERTAIN</option>
                        <option value="MAINTENANCE WEBSITE">MAINTENANCE WEBSITE</option>
                      </select>
                    <label for="productServiceSelect" >QUALIFICATION FEEDBACK</label>
                    <select name="qualification-feedback" id="qualification-feedback" class="form-select mb-4 reset" >
                        <option value="" selected>---Please select---</option>
                        <option value="UNCERTAIN - small catalogue less than 10 items">UNCERTAIN - small catalogue less than 10 items</option>
                        <option value="CATALOGUE - Images Background">CATALOGUE - Images Background</option>
                        <option value="INACTIVE PAGE - Personal website">INACTIVE PAGE - Personal website</option>
                        <option value="INACTIVE PAGE - Amazon">INACTIVE PAGE - Amazon</option>
                        <option value="INACTIVE PAGE - Mainteinance">INACTIVE PAGE - Mainteinance</option>
                        <option value="INACTIVE PAGE - Register to view pages">INACTIVE PAGE - Register to view pages</option>
                        <option value="WRONG CATEGORY - Personalised & Services">WRONG CATEGORY - Personalised & Services</option>
                        <option value="WRONG CATEGORY - Books">WRONG CATEGORY - Books</option>
                        <option value="WRONG CATEGORY - Sex">WRONG CATEGORY - Sex</option>
                        <option value="WRONG CATEGORY - CD & DVD">WRONG CATEGORY - CD & DVD</option>
                        <option value="WRONG CATEGORY - CBD Derivative">WRONG CATEGORY - CBD Derivative</option>
                        <option value="WRONG CATEGORY - Frozen Products">WRONG CATEGORY - Frozen Products</option>
                        <option value="WRONG CATEGORY - Spare Parts">WRONG CATEGORY - Spare Parts</option>
                        <option value="WRONG CATEGORY - Prom & Wedding">WRONG CATEGORY - Prom & Wedding</option>
                        <option value="WRONG CATEGORY - Smoking Gadgets">WRONG CATEGORY - Smoking Gadgets</option>
                        <option value="WRONG CATEGORY - Musical Instruments">WRONG CATEGORY - Musical Instruments</option>
                        <option value="WRONG CATEGORY - Hunting tools">WRONG CATEGORY - Hunting tools</option>
                        <option value="WRONG CATEGORY - Tools">WRONG CATEGORY - Tools</option>
                        <option value="WRONG CATEGORY - Software">WRONG CATEGORY - Software</option>
                        <option value="WRONG CATEGORY - Industrial Tools">WRONG CATEGORY - Industrial Tools</option>
                        <option value="WRONG CATEGORY - Cake Shop">WRONG CATEGORY - Cake Shop</option>
                        <option value="NOT APPROPRIATE - Explicit/Violent content">NOT APPROPRIATE - Explicit/Violent content</option>
                        <option value="NOT APPROPRIATE - Possible Fakes/Fraud">NOT APPROPRIATE - Possible Fakes/Fraud</option>
                        <option value="NOT EU - Language and currency not EU">NOT EU - Language and currency not EU</option>
                        <option value="N/A">N/A</option>
                      </select>
                      <div class="form-outline mb-4">
                        <input type="text" name="note" id="note" class="form-control reset" style="height: 50px;"/>
                        <label class="form-label" for="note" style="color: #1266f1; font-size:small;">NOTE FOR QC</label>
                    </div>
                    
                </div>
              </div>
              <div class="row">
                <div class="col-md-2" id="record_left" name="record_left">
                  Records Left: <b style="color: blue;" id="record-left-value">{{ record_left }}</b>
                </div>
                <div class="col-md-2" style="float: left;">
                  Your Total: <b style="color: darkgreen;" id="your_score">{{ your_score }} </b>
                  <br>Your Paid: <b style="color: red; margin-left: 4px;" id="your_paid"> {{ your_paid }} </b>
                </div>
                <div class="col-md-4">
                  <button id="load-domain" type="button" style="height: 50px; font-size: 0.9rem; font-weight: bold;" class="btn btn-secondary btn-block">
                    Load New Domain
                  </button>
                </div>
                <div class="col-md-4">
                  <button type="submit" id="save-button-only" style="height: 50px; font-size: 0.9rem; font-weight: bold;" class="btn btn-primary btn-block">
                    Save
                  </button>
                </div>
              </div>
                
        
          
        </div>
      </div>
    </div>
  
    
  </div>
</form>
  <!-- End your project here-->

  <!-- MDB -->
  <script type="text/javascript" src="{{ url_for('static', filename='js/mdb.min.js')}}"></script>
  <!-- Custom scripts -->
  <script type="text/javascript"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <script src="{{ url_for('static', filename='js/save-load-button.js')}}"></script>



  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var inputForm = document.getElementById("input-form");
      var inputElements = inputForm.getElementsByTagName("input");
  
      // Attach event listener to each input element
      for (var i = 0; i < inputElements.length; i++) {
        inputElements[i].addEventListener("keydown", function(event) {
          // Check if the pressed key is Enter
          if (event.keyCode === 13) {
            // Prevent the default behavior of the Enter key
            event.preventDefault();
          }
        });
      }
    });
  </script>
  <script>
    function copyUrl() {
      var urlInput = document.getElementById("url");
      urlInput.select();
      urlInput.setSelectionRange(0, 99999); // For mobile devices
      document.execCommand("copy");
      
      var copyButton = document.getElementById("copy-button");
      copyButton.innerHTML = "Copied!";
      setTimeout(function() {
        copyButton.innerHTML = "Copy";
      }, 2000);
    }

    var copyButton = document.getElementById("copy-button");
    copyButton.addEventListener("click", copyUrl);
  </script>
  

  
  <script>
  $(document).ready(function () {
    var select = document.getElementById("pic");
      $('#pic option').remove();
      var option = document.createElement("option");
      option.text = getCookie('username');
      option.value = getCookie('username');
      select.appendChild(option)
      
    
      function getCookie(cookieName) {
          let cookie = {};
          document.cookie.split(';').forEach(function(el) {
              let [key,value] = el.split('=');
              cookie[key.trim()] = value;
          })
          return cookie[cookieName];
          }
  })
  

  </script>

  <script>
 $(document).ready(function () {
    var get_cookies = getCookie('role');
    console.log(get_cookies)
      if (typeof get_cookies === 'undefined' || get_cookies === ''){
        window.location.href = '/';
      }

    var select = document.getElementById("pic");
      $('#pic option').remove();
      var option = document.createElement("option");
      option.text = getCookie('username');
      option.value = getCookie('username');
      select.appendChild(option)
      
    
      function getCookie(cookieName) {
          let cookie = {};
          document.cookie.split(';').forEach(function(el) {
              let [key,value] = el.split('=');
              cookie[key.trim()] = value;
          })
          return cookie[cookieName];
          }
  
    console.log(select.value)
      function sendPicValue() {
      fetch("/form", {
        method: "POST",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded"
        },
        body: "pic=" + encodeURIComponent(select.value)
      })
      .then(response => response.json())
        .then(function(response) {
          document.getElementById('your_score').textContent = response.your_score;
          document.getElementById('your_paid').textContent = response.your_paid;
        })
        .catch(function(error) {
          console.error('Error sending pic:', error);
        });
    }
    sendPicValue();
  })
  </script>
  
{% endblock %}